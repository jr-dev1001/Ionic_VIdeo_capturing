<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Video Capture
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Video Capture</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="ion-padding">
    <!-- Video List -->
    <ion-list *ngIf="videos.length > 0" class="ion-margin-top">
      <ion-list-header>
        <ion-label>Saved Videos ({{ videos.length }})</ion-label>
      </ion-list-header>

      <ion-item *ngFor="let video of videos" button (click)="playVideo(video)">
        <ion-icon name="videocam-outline" slot="start" color="primary"></ion-icon>
        <ion-label>
          <h2>{{ video.name }}</h2>
          <p>{{ formatFileSize(video.size) }} â€¢ {{ formatDate(video.date) }}</p>
        </ion-label>
        <ion-button fill="clear" color="danger" slot="end" (click)="deleteVideo(video); $event.stopPropagation()">
          <ion-icon name="trash-outline"></ion-icon>
        </ion-button>
      </ion-item>
    </ion-list>

    <!-- Empty State -->
    <div *ngIf="videos.length === 0" class="empty-state">
      <ion-icon name="videocam-outline" size="large" color="medium"></ion-icon>
      <h2>No videos captured yet</h2>
      <p>Tap the button above to capture your first video!</p>
    </div>
  </div>

  <!-- Video Player Modal -->
  <ion-modal [isOpen]="selectedVideo !== null" (didDismiss)="closeVideo()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>{{ selectedVideo?.name }}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeVideo()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <video *ngIf="videoUrl" [src]="videoUrl" controls autoplay style="width: 100%; max-height: 70vh;">
          Your browser does not support the video tag.
        </video>
      </ion-content>
    </ng-template>
  </ion-modal>

  <!-- Capture Button Fixed at Bottom -->
  <div class="capture-button-container">
    <ion-button
      expand="block"
      class="capture-button"
      (click)="captureVideo()"
    >
      <ion-icon name="videocam" slot="start"></ion-icon>
      Capture Video
    </ion-button>
  </div>
</ion-content>

