<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>
      <ion-icon name="videocam" class="header-icon"></ion-icon>
      Video Capture
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="main-content">
  <ion-header collapse="condense">
    <ion-toolbar color="primary">
      <ion-title size="large">Video Capture</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="content-wrapper">
    <!-- Header Section -->
    <div class="header-section">
      <h1 class="page-title">My Videos</h1>
      <p class="page-subtitle" *ngIf="videos.length > 0">{{ videos.length }} video{{ videos.length > 1 ? 's' : '' }} saved</p>
    </div>

    <!-- Video List -->
    <div *ngIf="videos.length > 0" class="videos-container">
      <ion-card *ngFor="let video of videos" class="video-card" (click)="playVideo(video)">
        <div class="video-card-content">
          <div class="video-icon-wrapper">
            <ion-icon name="play-circle" class="play-icon"></ion-icon>
          </div>
          <div class="video-info">
            <h3 class="video-title">{{ formatVideoName(video.name) }}</h3>
            <div class="video-meta">
              <span class="meta-item">
                <ion-icon name="calendar-outline"></ion-icon>
                {{ formatDate(video.date) }}
              </span>
              <span class="meta-item" *ngIf="video.size > 0">
                <ion-icon name="folder-outline"></ion-icon>
                {{ formatFileSize(video.size) }}
              </span>
            </div>
          </div>
          <ion-button 
            fill="clear" 
            color="danger" 
            class="delete-button"
            (click)="deleteVideo(video); $event.stopPropagation()">
            <ion-icon name="trash-outline" slot="icon-only"></ion-icon>
          </ion-button>
        </div>
      </ion-card>
    </div>

    <!-- Empty State -->
    <div *ngIf="videos.length === 0" class="empty-state">
      <div class="empty-icon-wrapper">
        <ion-icon name="videocam-outline"></ion-icon>
      </div>
      <h2 class="empty-title">No videos yet</h2>
      <p class="empty-text">Tap the button below to capture your first video!</p>
    </div>
  </div>

  <!-- Video Player Modal -->
  <ion-modal [isOpen]="selectedVideo !== null" (didDismiss)="closeVideo()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>{{ selectedVideo?.name }}</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeVideo()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      <ion-content class="ion-padding">
        <video *ngIf="videoUrl" [src]="videoUrl" controls autoplay style="width: 100%; max-height: 70vh;">
          Your browser does not support the video tag.
        </video>
      </ion-content>
    </ng-template>
  </ion-modal>

  <!-- Capture Button Fixed at Bottom -->
  <div class="capture-button-container">
    <ion-button
      expand="block"
      class="capture-button"
      (click)="captureVideo()"
    >
      <ion-icon name="videocam" slot="start"></ion-icon>
      Capture Video
    </ion-button>
  </div>
</ion-content>

